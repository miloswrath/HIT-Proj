{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\Fall24 MS\\\\CS3980 Proj\\\\cap_rx_3\\\\HIT-Proj\\\\code\\\\app\\\\src\\\\ChatRow.js\",\n  _s = $RefreshSig$();\n// ChatRow.jsx\nimport React, { useState, useEffect } from 'react';\nimport ChatProfileBubble from './ChatProfileBubble';\nimport PropTypes from 'prop-types';\nimport ReactMarkdown from 'react-markdown';\nimport rehypeRaw from 'rehype-raw';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ChatRow({\n  chatContent,\n  originatingUser\n}) {\n  _s();\n  const isUser = originatingUser === 'user';\n  const isBot = originatingUser === 'bot';\n  const chatBubbleClasses = `\n        bg-white w-3/4 py-4 px-6 \n        ${isUser ? 'rounded-l-2xl rounded-t-2xl ml-2 ' : ''}\n        ${isBot ? 'rounded-r-2xl rounded-b-2xl mr-2' : ''}\n    `;\n  const contentClass = `\n        w-8/9 flex flex-row\n        ${isUser ? 'justify-end' : ''}\n        ${isBot ? 'justify-start' : ''}\n    `;\n  const [displayedText, setDisplayedText] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  useEffect(() => {\n    // Ensure chatContent is a string\n    const sanitizedChatContent = typeof chatContent === 'string' ? chatContent : String(chatContent);\n    if (isBot && sanitizedChatContent.length > 0) {\n      const tokens = tokenizeHTML(sanitizedChatContent);\n      let tokenIndex = 0;\n      let charIndex = 0;\n      let currentDisplayedText = '';\n      setIsTyping(true);\n      setDisplayedText('');\n      const typingSpeed = 15; // milliseconds per character\n      const tagDelay = 0; // delay after a tag\n\n      const type = () => {\n        if (tokenIndex >= tokens.length) {\n          setIsTyping(false);\n          return;\n        }\n        const currentToken = tokens[tokenIndex];\n        if (currentToken.startsWith('<')) {\n          // It's an HTML tag, append it immediately\n          currentDisplayedText += currentToken;\n          setDisplayedText(currentDisplayedText);\n          tokenIndex++;\n          // Continue typing after a small delay\n          setTimeout(type, tagDelay);\n        } else {\n          // It's text, append character by character\n          if (charIndex < currentToken.length) {\n            currentDisplayedText += currentToken.charAt(charIndex);\n            setDisplayedText(currentDisplayedText);\n            charIndex++;\n            setTimeout(type, typingSpeed);\n          } else {\n            // Move to next token\n            tokenIndex++;\n            charIndex = 0;\n            // Small delay before next token\n            setTimeout(type, tagDelay);\n          }\n        }\n      };\n      type();\n    }\n  }, [isBot, chatContent]);\n  const contentToRender = isBot ? displayedText : chatContent;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `w-full flex flex-row transform transition-transform duration-300 animate-popIn`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-1/12 flex flex-col justify-start items-center pb-6\",\n      children: isBot && /*#__PURE__*/_jsxDEV(ChatProfileBubble, {\n        user: \"bot\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 28\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: contentClass,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: chatBubbleClasses,\n        children: [/*#__PURE__*/_jsxDEV(ReactMarkdown, {\n          rehypePlugins: [rehypeRaw],\n          children: contentToRender\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), isBot && isTyping && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"inline-block w-2 h-2 ml-1 bg-gray-700 rounded-full animate-bounce\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-1/12 flex flex-col justify-end items-center pt-6\",\n      children: isUser && /*#__PURE__*/_jsxDEV(ChatProfileBubble, {\n        user: \"user\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 29\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 9\n  }, this);\n}\n\n// Helper function to tokenize HTML content\n_s(ChatRow, \"UQ25kdMGnuFC5P/kLuPD8AvN944=\");\n_c = ChatRow;\nfunction tokenizeHTML(html) {\n  const regex = /(<[^>]+>)/g;\n  const tokens = html.split(regex).filter(token => token.length > 0);\n  return tokens;\n}\n\n// PropTypes for type checking\nChatRow.propTypes = {\n  chatContent: PropTypes.string.isRequired,\n  originatingUser: PropTypes.oneOf(['user', 'bot']).isRequired\n};\nexport default ChatRow;\nvar _c;\n$RefreshReg$(_c, \"ChatRow\");","map":{"version":3,"names":["React","useState","useEffect","ChatProfileBubble","PropTypes","ReactMarkdown","rehypeRaw","jsxDEV","_jsxDEV","ChatRow","chatContent","originatingUser","_s","isUser","isBot","chatBubbleClasses","contentClass","displayedText","setDisplayedText","isTyping","setIsTyping","sanitizedChatContent","String","length","tokens","tokenizeHTML","tokenIndex","charIndex","currentDisplayedText","typingSpeed","tagDelay","type","currentToken","startsWith","setTimeout","charAt","contentToRender","className","children","user","fileName","_jsxFileName","lineNumber","columnNumber","rehypePlugins","_c","html","regex","split","filter","token","propTypes","string","isRequired","oneOf","$RefreshReg$"],"sources":["C:/Users/Admin/Desktop/Fall24 MS/CS3980 Proj/cap_rx_3/HIT-Proj/code/app/src/ChatRow.js"],"sourcesContent":["// ChatRow.jsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport ChatProfileBubble from './ChatProfileBubble';\r\nimport PropTypes from 'prop-types';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport rehypeRaw from 'rehype-raw'\r\n\r\nfunction ChatRow({ chatContent, originatingUser }) {\r\n    const isUser = originatingUser === 'user';\r\n    const isBot = originatingUser === 'bot';\r\n\r\n    const chatBubbleClasses = `\r\n        bg-white w-3/4 py-4 px-6 \r\n        ${isUser ? 'rounded-l-2xl rounded-t-2xl ml-2 ' : ''}\r\n        ${isBot ? 'rounded-r-2xl rounded-b-2xl mr-2' : ''}\r\n    `;\r\n\r\n    const contentClass = `\r\n        w-8/9 flex flex-row\r\n        ${isUser ? 'justify-end' : ''}\r\n        ${isBot ? 'justify-start' : ''}\r\n    `;\r\n\r\n    const [displayedText, setDisplayedText] = useState('');\r\n    const [isTyping, setIsTyping] = useState(false);\r\n    useEffect(() => {\r\n        // Ensure chatContent is a string\r\n        const sanitizedChatContent = typeof chatContent === 'string' ? chatContent : String(chatContent);\r\n\r\n        if (isBot && sanitizedChatContent.length > 0) {\r\n            const tokens = tokenizeHTML(sanitizedChatContent);\r\n            let tokenIndex = 0;\r\n            let charIndex = 0;\r\n            let currentDisplayedText = '';\r\n\r\n            setIsTyping(true);\r\n            setDisplayedText('');\r\n\r\n            const typingSpeed = 15; // milliseconds per character\r\n            const tagDelay = 0; // delay after a tag\r\n\r\n            const type = () => {\r\n                if (tokenIndex >= tokens.length) {\r\n                    setIsTyping(false);\r\n                    return;\r\n                }\r\n\r\n                const currentToken = tokens[tokenIndex];\r\n\r\n                if (currentToken.startsWith('<')) {\r\n                    // It's an HTML tag, append it immediately\r\n                    currentDisplayedText += currentToken;\r\n                    setDisplayedText(currentDisplayedText);\r\n                    tokenIndex++;\r\n                    // Continue typing after a small delay\r\n                    setTimeout(type, tagDelay);\r\n                } else {\r\n                    // It's text, append character by character\r\n                    if (charIndex < currentToken.length) {\r\n                        currentDisplayedText += currentToken.charAt(charIndex);\r\n                        setDisplayedText(currentDisplayedText);\r\n                        charIndex++;\r\n                        setTimeout(type, typingSpeed);\r\n                    } else {\r\n                        // Move to next token\r\n                        tokenIndex++;\r\n                        charIndex = 0;\r\n                        // Small delay before next token\r\n                        setTimeout(type, tagDelay);\r\n                    }\r\n                }\r\n            };\r\n\r\n            type();\r\n        }\r\n    }, [isBot, chatContent]);  \r\n    const contentToRender = isBot ? displayedText : chatContent;\r\n\r\n    return (\r\n        <div className={`w-full flex flex-row transform transition-transform duration-300 animate-popIn`}>\r\n            {/* Left Profile Bubble (Bot) */}\r\n            <div className=\"w-1/12 flex flex-col justify-start items-center pb-6\">\r\n                {isBot && (<ChatProfileBubble user=\"bot\" />)}\r\n            </div>\r\n            {/* Chat Content */}\r\n            <div className={contentClass}>\r\n                <div className={chatBubbleClasses}>\r\n                    <ReactMarkdown rehypePlugins={[rehypeRaw]}>\r\n                        {contentToRender}\r\n                    </ReactMarkdown>\r\n                    {isBot && isTyping && (\r\n                        <span className=\"inline-block w-2 h-2 ml-1 bg-gray-700 rounded-full animate-bounce\"></span>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            {/* Right Profile Bubble (User) */}\r\n            <div className=\"w-1/12 flex flex-col justify-end items-center pt-6\">\r\n                {isUser && (<ChatProfileBubble user=\"user\" />)}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n// Helper function to tokenize HTML content\r\nfunction tokenizeHTML(html) {\r\n    const regex = /(<[^>]+>)/g;\r\n    const tokens = html.split(regex).filter(token => token.length > 0);\r\n    return tokens;\r\n}\r\n\r\n// PropTypes for type checking\r\nChatRow.propTypes = {\r\n    chatContent: PropTypes.string.isRequired,\r\n    originatingUser: PropTypes.oneOf(['user', 'bot']).isRequired,\r\n};\r\n\r\nexport default ChatRow;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}